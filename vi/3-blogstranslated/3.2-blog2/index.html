<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=../../../images/favicon.png type=image/png><title>Blog 2 :: Báo cáo thực tập</title>
<link href=../../../css/nucleus.css?1765353830 rel=stylesheet><link href=../../../css/fontawesome-all.min.css?1765353830 rel=stylesheet><link href=../../../css/hybrid.css?1765353830 rel=stylesheet><link href=../../../css/featherlight.min.css?1765353830 rel=stylesheet><link href=../../../css/perfect-scrollbar.min.css?1765353830 rel=stylesheet><link href=../../../css/auto-complete.css?1765353830 rel=stylesheet><link href=../../../css/atom-one-dark-reasonable.css?1765353830 rel=stylesheet><link href=../../../css/theme.css?1765353830 rel=stylesheet><link href=../../../css/hugo-theme.css?1765353830 rel=stylesheet><link href=../../../css/theme-workshop.css?1765353830 rel=stylesheet><script src=../../../js/jquery-3.3.1.min.js?1765353830></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../../vi/3-blogstranslated/3.2-blog2/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../../js/lunr.min.js?1765353830></script><script type=text/javascript src=../../../js/auto-complete.js?1765353830></script><script type=text/javascript>var baseurl="https://phucthichnghiccode.github.io/InternshipReport.github.io//vi"</script><script type=text/javascript src=../../../js/search.js?1765353830></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vi/1-worklog/ title="Nhật ký công việc" class=dd-item><a href=../../../vi/1-worklog/><b>1. </b>Nhật ký công việc
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/1-worklog/1.1-week1/ title="Worklog Tuần 1" class=dd-item><a href=../../../vi/1-worklog/1.1-week1/><b>1.1. </b>Worklog Tuần 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.2-week2/ title="Worklog Tuần 2" class=dd-item><a href=../../../vi/1-worklog/1.2-week2/><b>1.2. </b>Worklog Tuần 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.3-week3/ title="Worklog Tuần 3" class=dd-item><a href=../../../vi/1-worklog/1.3-week3/><b>1.3. </b>Worklog Tuần 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.4-week4/ title="Worklog Tuần 4" class=dd-item><a href=../../../vi/1-worklog/1.4-week4/><b>1.4. </b>Worklog Tuần 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.5-week5/ title="Worklog Tuần 5" class=dd-item><a href=../../../vi/1-worklog/1.5-week5/><b>1.5. </b>Worklog Tuần 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.6-week6/ title="Worklog Tuần 6" class=dd-item><a href=../../../vi/1-worklog/1.6-week6/><b>1.6. </b>Worklog Tuần 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.7-week7/ title="Worklog Tuần 7" class=dd-item><a href=../../../vi/1-worklog/1.7-week7/><b>1.7. </b>Worklog Tuần 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.8-week8/ title="Worklog Tuần 8" class=dd-item><a href=../../../vi/1-worklog/1.8-week8/><b>1.8. </b>Worklog Tuần 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.9-week9/ title="Worklog Tuần 9" class=dd-item><a href=../../../vi/1-worklog/1.9-week9/><b>1.9. </b>Worklog Tuần 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.10-week10/ title="Worklog Tuần 10" class=dd-item><a href=../../../vi/1-worklog/1.10-week10/><b>1.10. </b>Worklog Tuần 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.11-week11/ title="Worklog Tuần 11" class=dd-item><a href=../../../vi/1-worklog/1.11-week11/><b>1.11. </b>Worklog Tuần 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.12-week12/ title="Worklog Tuần 12" class=dd-item><a href=../../../vi/1-worklog/1.12-week12/><b>1.12 </b>Worklog Tuần 12
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/2-proposal/ title="Bản đề xuất" class=dd-item><a href=../../../vi/2-proposal/><b>2. </b>Bản đề xuất
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/ title="Các bài blogs đã dịch" class="dd-item
parent"><a href=../../../vi/3-blogstranslated/><b>3. </b>Các bài blogs đã dịch
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../../vi/3-blogstranslated/3.1-blog1/><b>3.2. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.2-blog2/ title="Blog 2" class="dd-item
active"><a href=../../../vi/3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../../vi/3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/4-eventparticipated/ title="Các events đã tham gia" class=dd-item><a href=../../../vi/4-eventparticipated/><b>4. </b>Các events đã tham gia
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/4-eventparticipated/4.1-event1/ title="Sự kiện 2" class=dd-item><a href=../../../vi/4-eventparticipated/4.1-event1/><b>4.2. </b>Sự kiện 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.2-event2/ title="Sự kiện 1" class=dd-item><a href=../../../vi/4-eventparticipated/4.2-event2/><b>4.1. </b>Sự kiện 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.3-event3/ title="Sự kiện 3" class=dd-item><a href=../../../vi/4-eventparticipated/4.3-event3/><b>4.2. </b>Sự kiện 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/ title=Workshop class=dd-item><a href=../../../vi/5-workshop/><b>5 </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.1-workshop-overview/ title="Giới thiệu" class=dd-item><a href=../../../vi/5-workshop/5.1-workshop-overview/><b>5.1 </b>Giới thiệu
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.2-project-architecture/ title="Kiến trúc Dự án" class=dd-item><a href=../../../vi/5-workshop/5.2-project-architecture/><b>5.2 </b>Kiến trúc Dự án
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-vpc/ title=VPC class=dd-item><a href=../../../vi/5-workshop/5.3-vpc/><b>5.3 </b>VPC
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.3-vpc/5.3.1-create-route-table/ title="Tạo Route Table và Internet Gateway" class=dd-item><a href=../../../vi/5-workshop/5.3-vpc/5.3.1-create-route-table/><b>5.3.1 </b>Tạo Route Table và Internet Gateway
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-vpc/5.3.3-create-security-groups/ title="Tạo Security Groups" class=dd-item><a href=../../../vi/5-workshop/5.3-vpc/5.3.3-create-security-groups/><b>5.3.3 </b>Tạo Security Groups
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-vpc/5.3.2-create-subnets/ title="Tạo Subnet" class=dd-item><a href=../../../vi/5-workshop/5.3-vpc/5.3.2-create-subnets/><b>5.3.2 </b>Tạo Subnet
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-vpc/5.3.4-create-vpc-endpoints/ title="Tạo VPC Endpoints" class=dd-item><a href=../../../vi/5-workshop/5.3-vpc/5.3.4-create-vpc-endpoints/><b>5.3.4 </b>Tạo VPC Endpoints
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.4-databaseandstorage/ title="Cơ sở dữ liệu và lưu trữ" class=dd-item><a href=../../../vi/5-workshop/5.4-databaseandstorage/><b>5.4 </b>Cơ sở dữ liệu và lưu trữ
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.4-databaseandstorage/5.4.1-create-rds/ title="Tạo RDS" class=dd-item><a href=../../../vi/5-workshop/5.4-databaseandstorage/5.4.1-create-rds/><b>5.4.1 </b>Tạo RDS
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-databaseandstorage/5.4.2-create-s3/ title="Tạo AWS S3" class=dd-item><a href=../../../vi/5-workshop/5.4-databaseandstorage/5.4.2-create-s3/><b>5.4.2 </b>Tạo AWS S3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-databaseandstorage/5.4.3-create-ecr/ title="Tạo AWS ECR" class=dd-item><a href=../../../vi/5-workshop/5.4-databaseandstorage/5.4.3-create-ecr/><b>5.4.3 </b>Tạo AWS ECR
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.5-computeandcontainer/ title="Compute và Container" class=dd-item><a href=../../../vi/5-workshop/5.5-computeandcontainer/><b>5.5 </b>Compute và Container
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.8-instruct-deploy-be-fe/ title="Hướng dẫn Deploy BackEnd And Frontend" class=dd-item><a href=../../../vi/5-workshop/5.8-instruct-deploy-be-fe/><b>5.8 </b>Hướng dẫn Deploy BackEnd And Frontend
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.7-amplifyandapigateway/ title="Tạo Amplify và API Gateway" class=dd-item><a href=../../../vi/5-workshop/5.7-amplifyandapigateway/><b>5.7 </b>Tạo Amplify và API Gateway
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.6-createalb/ title="Tạo AWS Load Balancers" class=dd-item><a href=../../../vi/5-workshop/5.6-createalb/><b>5.6 </b>Tạo AWS Load Balancers
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/6-self-evaluation/ title="Tự đánh giá" class=dd-item><a href=../../../vi/6-self-evaluation/><b>6. </b>Tự đánh giá
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/7-feedback/ title="Chia sẻ, đóng góp ý kiến" class=dd-item><a href=../../../vi/7-feedback/><b>7. </b>Chia sẻ, đóng góp ý kiến
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://phucthichnghiccode.github.io/InternshipReport.github.io/3-blogstranslated/3.2-blog2/>English</option><option id=vi value=https://phucthichnghiccode.github.io/InternshipReport.github.io/vi/3-blogstranslated/3.2-blog2/ selected>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../../vi/>Báo cáo thực tập</a> > <a href=../../../vi/3-blogstranslated/>Các bài blogs đã dịch</a> > Blog 2</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#cơ-chế-hoạt-động-của-kiểm-thử-khôi-phục-aws-backup>Cơ chế hoạt động của kiểm thử khôi phục AWS Backup</a></li><li><a href=#xây-dựng-kế-hoạch-khôi-phục-thử-nghiệm>Xây dựng kế hoạch khôi phục thử nghiệm</a></li><li><a href=#triển-khai-xác-thực-khôi-phục>Triển khai xác thực khôi phục</a></li><li><a href=#những-cân-nhắc-khi-kiểm-tra-khôi-phục-aws-backup>Những cân nhắc khi kiểm tra khôi phục AWS Backup</a></li><li><a href=#tối-ưu-chi-phí>Tối ưu chi phí</a></li><li><a href=#kiểm-toán-và-báo-cáo-sao-lưu-aws>Kiểm toán và báo cáo sao lưu AWS</a></li><li><a href=#khôi-phục-kế-hoạch-thử-nghiệm>Khôi phục kế hoạch thử nghiệm</a></li><li><a href=#trực-quan-hoá-hoàn-chỉnh-quá-trình-thử-nghiệm>Trực quan hoá hoàn chỉnh quá trình thử nghiệm</a><ul><li><a href=#điều-kiện-tiên-quyết>Điều kiện tiên quyết</a></li><li><a href=#khởi-chạy-aws-cloudformation-stack>Khởi chạy AWS CloudFormation stack</a></li><li><a href=#chạy-kế-hoạch-thử-nghiệm-khôi-phục>Chạy kế hoạch thử nghiệm khôi phục</a></li></ul></li><li><a href=#dọn-dẹp>Dọn dẹp</a></li><li><a href=#tổng-kết>Tổng kết</a></li><li><a href=#thông-tin-tác-giả>Thông tin tác giả</a><ul><li><a href=#gabe-contreras>Gabe Contreras</a></li><li><a href=#sabith-venkitachalapathy>Sabith Venkitachalapathy</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 2</h1><h1 id=triển-khai-thử-nghiệm-khôi-phục-để-xác-thực-phục-hồi-bằng-aws-backup>Triển khai thử nghiệm khôi phục để xác thực phục hồi bằng AWS Backup</h1><p><em>Bởi <strong>Gabe Contreras</strong> và <strong>Sabith Venkitachalapathy</strong> | 28 tháng 3 năm 2025</em>
<em>Phân loại: Advanced (300), AWS Backup, Storage, Technical</em></p><hr><p>Các ứng dụng quan trọng là nền tảng cho mọi thứ, từ thương mại điện tử đến chăm sóc sức khỏe, khiến cho một chiến lược sao lưu vững chắc không chỉ là một phương pháp hay nhất mà còn là một nhu cầu thiết yếu. Các mối đe dọa như <strong>ransomware</strong> (phần mềm tống tiền) ngày càng trở nên tinh vi hơn, và đối với người dùng AWS, chỉ có các bản sao lưu thôi là chưa đủ. Các tổ chức cần tin tưởng rằng những biện pháp bảo vệ này sẽ hoạt động hiệu quả khi thảm họa xảy ra.</p><p>Việc kiểm thử thủ công, mặc dù cần thiết, nhưng lại làm tiêu tốn tài nguyên Công nghệ thông tin. Thông qua việc kiểm thử khôi phục tự động theo lịch trình đã định, các tổ chức đạt được nhiều hơn là chỉ hiệu quả: họ thiết lập một hệ thống giúp xác minh tính toàn vẹn của bản sao lưu, hợp lý hóa việc báo cáo tuân thủ, và giải phóng nguồn nhân lực quý giá—tất cả những điều này đồng thời xây dựng sự chắc chắn rằng chiến lược bảo vệ của họ sẽ mang lại hiệu quả khi cần thiết.</p><p>Trong bài viết trước của chúng tôi, <em>Validating recovery readiness with AWS Backup restore testing</em>, chúng tôi đã tìm hiểu lý do tại sao việc kiểm thử và khôi phục của AWS Backup lại quan trọng để đáp ứng các chính sách phục hồi sau sự cố (DR) nội bộ và các yêu cầu pháp lý. Trong bối cảnh kỹ thuật số được định hình bởi các quy định như <strong>European Union’s Digital Operational Resilience Act (DORA)</strong> của Liên minh Châu Âu và <strong>New York Department of Financial Services (NYDFS)</strong>, khả năng phục hồi không chỉ là mục tiêu mà còn là một yêu cầu bắt buộc. Việc kiểm thử khôi phục của AWS Backup có thể cung cấp bằng chứng được yêu cầu bởi các quy định này; trong khi đó, các tính năng kiểm thử và kiểm toán mang lại nhiều khả năng để giúp các tổ chức xác thực và báo cáo về những nỗ lực tăng cường khả năng phục hồi của mình.</p><p>Trong bài viết này, bạn sẽ tìm hiểu cách để thiết lập cấu hình <strong>AWS Backup restore testing</strong> và một số phương pháp hay nhất cần cân nhắc khi tạo kế hoạch của riêng mình. Bạn cũng sẽ nhận được một ví dụ để xem cách kiểm tra khôi phục đầu cuối hoạt động trong thực tế.</p><h2 id=cơ-chế-hoạt-động-của-kiểm-thử-khôi-phục-aws-backup>Cơ chế hoạt động của kiểm thử khôi phục AWS Backup</h2><p><strong>AWS Backup restore testing</strong> cho phép người dùng kiểm thử việc khôi phục dữ liệu theo một lịch trình định trước và xác thực dữ liệu đã được khôi phục. Khả năng thiết lập lịch trình và tạo ra các quy trình tự động để kiểm tra việc khôi phục dữ liệu giúp giảm bớt công sức thủ công và giúp đáp ứng các yêu cầu về tuân thủ.</p><p>Nếu không có kiểm thử khôi phục tự động, nhân sự có thể sẽ phải chọn các hệ thống và các điểm khôi phục, hoàn thành việc khôi phục thủ công, và yêu cầu các đội ngũ ứng dụng xác thực dữ liệu đã được khôi phục. Việc này tiêu tốn thời gian và tài nguyên của nhiều đội ngũ, mà lẽ ra có thể được sử dụng hiệu quả hơn để cải thiện các ứng dụng. Khi tự động hóa quy trình này, chúng ta có thể tạo ra các quy trình xác thực dữ liệu để xác thực các lần khôi phục một cách thường xuyên.</p><p>Một <strong>AWS Backup restore testing plan</strong> được xây dựng qua hai giai đoạn:</p><ol><li>Đầu tiên, bạn tạo kế hoạch kiểm thử khôi phục.</li><li>Thứ hai, bạn tạo các lựa chọn tài nguyên được bảo vệ sẽ được khôi phục bởi kế hoạch kiểm thử đó.</li></ol><p>Khi AWS Backup hoàn tất việc khôi phục, bạn có thể xây dựng quy trình xác thực cho việc kiểm thử khôi phục bằng các hàm <strong>AWS Lambda</strong> được kích hoạt bởi <strong>Amazon EventBridge</strong>. Các hàm Lambda có thể thực hiện nhiều hoạt động xác thực khác nhau—bao gồm kiểm tra khả năng kết nối, truy xuất các đối tượng từ Amazon S3, hoặc lấy trạng thái của khóa mã hóa để xác thực dữ liệu thực tế—sau đó báo cáo lại cho AWS Backup về việc liệu quá trình xác thực đó thành công hay thất bại. Sau khi kiểm thử khôi phục hoàn tất, bạn có thể sử dụng các báo cáo của <strong>AWS Backup Audit Manager</strong> để chứng minh sự tuân thủ khi cần thiết.</p><h2 id=xây-dựng-kế-hoạch-khôi-phục-thử-nghiệm>Xây dựng kế hoạch khôi phục thử nghiệm</h2><p>Bước đầu tiên của việc triển khai kiểm thử khôi phục là xây dựng kế hoạch kiểm thử khôi phục. Vì có nhiều yếu tố cần cân nhắc về tần suất kiểm thử và những gì cần kiểm thử, chúng tôi sẽ tập trung vào các phương pháp tốt nhất và các khuyến nghị. Một kế hoạch kiểm thử khôi phục bao gồm ba phần:</p><ul><li><strong>Tần suất kiểm tra (Test frequency)</strong></li><li><strong>Quy định thời gian bắt đầu (Start within time)</strong></li><li><strong>Các tiêu chí để lựa chọn điểm phục hồi (Recovery point selection criteria)</strong></li></ul><p>Với <em>Tần suất kiểm thử</em>, bạn nên kiểm thử các tài nguyên quan trọng hàng ngày hoặc hàng tuần. Bạn nên kiểm thử các tài nguyên trong khoảng thời gian lưu giữ của chúng, nghĩa là nếu chúng ta giữ các điểm khôi phục trong 14 ngày, bạn nên cho việc kiểm thử chạy thường xuyên hơn thế.</p><p><em>Quy định thời gian bắt đầu</em> phụ thuộc vào số lượng điểm khôi phục bạn sẽ kiểm thử và mỗi lần khôi phục mất bao lâu để hoàn thành. Mỗi dịch vụ có <strong>maximum concurrent restores</strong> (giới hạn phục hồi đồng thời tối đa) được phép, và bạn cần đảm bảo các kế hoạch của mình được giãn cách ra để không vượt quá giới hạn đó.
<img alt="Hình 1: Ví dụ về cấu hình của kế hoạch kiểm thử" src=../../../images/2-Proposal/Blog2_1.png></p><p>Việc Lựa chọn điểm khôi phục có thể bao gồm tất cả hoặc các kho lưu trữ cụ thể, khung thời gian cho các điểm khôi phục đủ điều kiện, và liệu có bao gồm các loại tài nguyên khôi phục tại một thời điểm cụ thể (PITR) hay không. Bạn có thể có một kho lưu trữ cho mỗi tài khoản, hoặc nhiều kho lưu trữ dựa trên các loại ứng dụng hoặc các cấp độ (tiers). Nếu bạn đang sao chép dữ liệu đến một tài khoản sao lưu trung tâm, một thiết kế tối ưu sẽ là tạo ra một logically air-gapped (LAG) vault cho mỗi tài khoản nguồn.
<img alt="Hình 2: Mẫu tiêu chí lựa chọn điểm khôi phục AWS Backup" src=../../../images/2-Proposal/Blog2_2.png></p><p>Sau khi tạo kế hoạch kiểm thử khôi phục, bạn chuyển sang giai đoạn 2: tạo các lựa chọn tài nguyên được bảo vệ. Với mỗi lựa chọn tài nguyên, bạn phải chọn một loại tài nguyên duy nhất, chẳng hạn như Amazon S3 hoặc <strong>Amazon Relational Database Service (Amazon RDS)</strong>. Sau khi chọn một loại tài nguyên, kiểm thử khôi phục cho phép bạn tùy chỉnh thêm những tài nguyên cụ thể nào sẽ được chọn. Mỗi kế hoạch kiểm thử khôi phục cho phép tối đa 30 lựa chọn tài nguyên được bảo vệ. Khi tạo phần gán tài nguyên, bạn có thể chọn vai trò IAM mặc định của AWS Backup. Nếu vai trò mặc định không tồn tại, vai trò đó sẽ được tạo ra với các quyền phù hợp.
<img alt="Hình 3: Mẫu phân bổ tài nguyên cho S3" src=../../../images/2-Proposal/Blog2_3.png></p><p>Bạn có thể lọc các tài nguyên theo lựa chọn riêng lẻ hoặc theo thẻ, điều này cho phép bạn chọn các tài nguyên cụ thể để kiểm thử dựa trên yêu cầu của mình. Trong Hình 4, chúng tôi chọn S3 làm loại tài nguyên, sau đó chọn lọc theo thẻ (tag) để chọn các bucket cụ thể.</p><p>Mỗi dịch vụ có một bộ siêu dữ liệu khôi phục khả thi riêng, cung cấp các giá trị mặc định để thực hiện kiểm thử khôi phục thành công, trong đó AWS Backup sẽ tự suy ra một bộ siêu dữ liệu khôi phục ở mức tối thiểu. Ngoài ra còn có siêu dữ liệu có thể ghi đè mà bạn có thể thay đổi để ghi đè lên các giá trị mặc định. Bạn có thể đọc thêm về siêu dữ liệu được suy ra và siêu dữ liệu có thể ghi đè trong documentation của AWS Backup.
<img alt="Hình 4: Ví dụ về lựa chọn tài nguyên cần bảo vệ được lọc bằng thẻ" src=../../../images/2-Proposal/Blog2_4.png></p><p>Sau khi xác định kế hoạch tổng thể và lựa chọn nguồn lực, chúng ta có một kế hoạch hoạt động đầy đủ như trong Hình 5.
<img alt="Hình 5: Ví dụ về cấu hình hoàn chỉnh của AWS Backup restore testing plan" src=../../../images/2-Proposal/Blog2_5.png></p><h2 id=triển-khai-xác-thực-khôi-phục>Triển khai xác thực khôi phục</h2><p>Việc cấu hình một kế hoạch kiểm thử khôi phục mới chỉ là một nửa công việc; bạn còn phải xác minh rằng dữ liệu đã được khôi phục của mình có thể sử dụng được. AWS Backup gửi các sự kiện của Amazon EventBridge cho những thay đổi về trạng thái của công việc khôi phục. Chúng ta có thể sử dụng các sự kiện này để kích hoạt một hàm AWS Lambda khi một công việc kiểm thử khôi phục chuyển sang trạng thái hoàn thành, điều này cho phép các đội ngũ ứng dụng tạo ra mã code để kiểm thử dữ liệu của họ. Mã kiểm thử phụ thuộc vào dịch vụ bạn đang bảo vệ, nhưng có thể bao gồm việc truy xuất các đối tượng từ một bucket S3 hoặc truy vấn Amazon DyanamoDB. Sau khi hàm Lambda của bạn chạy xong, nó có thể báo cáo lại cho AWS Backup về việc thành công hay thất bại. Hình 6 minh họa quy trình xác thực khôi phục mẫu này.
<img alt="Hình 6: Quy trình kiểm tra xác thực khôi phục AWS Backup" src=../../../images/2-Proposal/Blog2_6.png></p><p>Nếu bạn có nhiều kế hoạch kiểm tra khôi phục, bạn có thể tùy chỉnh quy tắc EventBridge để gửi các sự kiện nhất định đến các chức năng tương ứng (như minh họa trong Hình 7) bằng cách bao gồm Amazon Resource Name (ARN) của kế hoạch kiểm tra khôi phục. Việc sử dụng ARN của kế hoạch kiểm tra khôi phục cũng cho phép bạn lọc bỏ các lần khôi phục thủ công.
<img alt="Hình 7: Ví dụ về khuôn mẫu sự kiện EventBridge cho công việc khôi phục" src=../../../images/2-Proposal/Blog2_7.png></p><p>Sau khi tạo mẫu sự kiện , bạn chọn một mục tiêu để gửi sự kiện đến. Nếu bạn có nhiều loại tài nguyên yêu cầu các tiêu chí kiểm thử riêng biệt, một hàm Lambda điều phối có thể giúp gửi các sự kiện cho các loại tài nguyên khác nhau đến đúng quy trình xác thực. Hàm Lambda điều phối này sẽ kiểm tra loại tài nguyên và định tuyến sự kiện đến hàm Lambda xác thực dữ liệu tương ứng. Nếu bạn có nhiều loại tài nguyên được bảo vệ, bạn sẽ chọn hàm Lambda điều phối này làm mục tiêu cho các sự kiện EventBridge, như được thấy trong Hình 8.
<img alt="Hình 8: Mẫu lựa chọn mục tiêu cho quy tắc EventBridge" src=../../../images/2-Proposal/Blog2_8.png></p><p>Sau đây là mẫu mã điều phối Lambda khôi phục:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> boto3
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> logging
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>logger <span style=color:#f92672>=</span> logging<span style=color:#f92672>.</span>getLogger()
</span></span><span style=display:flex><span>logger<span style=color:#f92672>.</span>setLevel(logging<span style=color:#f92672>.</span>INFO)
</span></span><span style=display:flex><span>lambda_client <span style=color:#f92672>=</span> boto3<span style=color:#f92672>.</span>client(<span style=color:#e6db74>&#39;lambda&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>handler</span>(event, context):
</span></span><span style=display:flex><span>    logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#34;Handling event: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span>, json<span style=color:#f92672>.</span>dumps(event))
</span></span><span style=display:flex><span>    resource_type <span style=color:#f92672>=</span> event<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;detail&#39;</span>, {})<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;resourceType&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>    function_name <span style=color:#f92672>=</span> <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> resource_type <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;RDS&#34;</span>:
</span></span><span style=display:flex><span>            function_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;RDSRestoreValidation&#34;</span>
</span></span><span style=display:flex><span>            logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#34;Resource is an RDS instance. Invoking Lambda function: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span>, function_name)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>elif</span> resource_type <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;S3&#34;</span>:
</span></span><span style=display:flex><span>            function_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;S3RestoreValidation&#34;</span>
</span></span><span style=display:flex><span>            logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#34;Resource is an S3 bucket. Invoking Lambda function: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span>, function_name)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>ValueError</span>(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Unsupported resource type: </span><span style=color:#e6db74>{</span>resource_type<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Invoke the appropriate Lambda function</span>
</span></span><span style=display:flex><span>        response <span style=color:#f92672>=</span> lambda_client<span style=color:#f92672>.</span>invoke(
</span></span><span style=display:flex><span>            FunctionName<span style=color:#f92672>=</span>function_name,
</span></span><span style=display:flex><span>            Payload<span style=color:#f92672>=</span>json<span style=color:#f92672>.</span>dumps(event),
</span></span><span style=display:flex><span>            InvocationType<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;RequestResponse&#34;</span>
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>        logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#34;Lambda invoke response: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span>, response)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>        logger<span style=color:#f92672>.</span>error(<span style=color:#e6db74>&#34;Error during Lambda invocation: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span>, str(e))
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span> e
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#34;Finished processing event for resource type: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span>, resource_type)
</span></span></code></pre></div><p>Trong đoạn mã của hàm Lambda điều phối khôi phục, bạn có thể thấy rằng nếu loại tài nguyên khớp với S3, nó sẽ chuyển tiếp toàn bộ sự kiện đến một hàm Lambda khác có tên là S3RestoreValidation. Hàm S3RestoreValidation này sau đó sẽ tiến hành xác thực việc khôi phục trên một tài nguyên S3 và báo cáo lại cho AWS Backup về việc xác thực đó thành công hay thất bại.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> boto3
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> logging
</span></span><span style=display:flex><span>logger <span style=color:#f92672>=</span> logging<span style=color:#f92672>.</span>getLogger()
</span></span><span style=display:flex><span>logger<span style=color:#f92672>.</span>setLevel(logging<span style=color:#f92672>.</span>INFO)
</span></span><span style=display:flex><span>s3_client <span style=color:#f92672>=</span> boto3<span style=color:#f92672>.</span>client(<span style=color:#e6db74>&#39;s3&#39;</span>)
</span></span><span style=display:flex><span>backup_client <span style=color:#f92672>=</span> boto3<span style=color:#f92672>.</span>client(<span style=color:#e6db74>&#39;backup&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>handler</span>(event, context):
</span></span><span style=display:flex><span>    logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#34;Handling event: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span>, json<span style=color:#f92672>.</span>dumps(event))
</span></span><span style=display:flex><span>    restore_job_id <span style=color:#f92672>=</span> event<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;detail&#39;</span>, {})<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;restoreJobId&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>    resource_type <span style=color:#f92672>=</span> event<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;detail&#39;</span>, {})<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;resourceType&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>    created_resource_arn <span style=color:#f92672>=</span> event<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;detail&#39;</span>, {})<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;createdResourceArn&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>    validation_status <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SUCCESSFUL&#34;</span>
</span></span><span style=display:flex><span>    validation_status_message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Restore validation completed successfully&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> resource_type <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;S3&#34;</span>:
</span></span><span style=display:flex><span>            bucket_name <span style=color:#f92672>=</span> get_bucket_name_from_arn(created_resource_arn)
</span></span><span style=display:flex><span>            <span style=color:#75715e># List objects in the bucket</span>
</span></span><span style=display:flex><span>            response <span style=color:#f92672>=</span> s3_client<span style=color:#f92672>.</span>list_objects_v2(Bucket<span style=color:#f92672>=</span>bucket_name)
</span></span><span style=display:flex><span>            <span style=color:#75715e># Check if the bucket contains more than 1 object</span>
</span></span><span style=display:flex><span>            object_count <span style=color:#f92672>=</span> response<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;KeyCount&#39;</span>, <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> object_count <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>                logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Bucket </span><span style=color:#e6db74>{</span>bucket_name<span style=color:#e6db74>}</span><span style=color:#e6db74> contains more than 1 object. Validation successful.&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Bucket </span><span style=color:#e6db74>{</span>bucket_name<span style=color:#e6db74>}</span><span style=color:#e6db74> contains 1 or fewer objects. Validation failed.&#34;</span>)
</span></span><span style=display:flex><span>                validation_status <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;FAILED&#34;</span>
</span></span><span style=display:flex><span>                validation_status_message <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Bucket </span><span style=color:#e6db74>{</span>bucket_name<span style=color:#e6db74>}</span><span style=color:#e6db74> contains only       </span><span style=color:#e6db74>{</span>object_count<span style=color:#e6db74>}</span><span style=color:#e6db74> object(s).&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            validation_status <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;FAILED&#34;</span>
</span></span><span style=display:flex><span>            validation_status_message <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Unsupported resource type: </span><span style=color:#e6db74>{</span>resource_type<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Report validation result to AWS Backup</span>
</span></span><span style=display:flex><span>        backup_client<span style=color:#f92672>.</span>put_restore_validation_result(
</span></span><span style=display:flex><span>            RestoreJobId<span style=color:#f92672>=</span>restore_job_id,
</span></span><span style=display:flex><span>            ValidationStatus<span style=color:#f92672>=</span>validation_status,
</span></span><span style=display:flex><span>            ValidationStatusMessage<span style=color:#f92672>=</span>validation_status_message
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>        logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#34;Restore validation result sent successfully&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>        logger<span style=color:#f92672>.</span>error(<span style=color:#e6db74>&#34;Error during restore validation: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span>, str(e))
</span></span><span style=display:flex><span>        validation_status <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;FAILED&#34;</span>
</span></span><span style=display:flex><span>        validation_status_message <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Restore validation encountered an error: </span><span style=color:#e6db74>{</span>str(e)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Report failure result to AWS Backup</span>
</span></span><span style=display:flex><span>        backup_client<span style=color:#f92672>.</span>put_restore_validation_result(
</span></span><span style=display:flex><span>            RestoreJobId<span style=color:#f92672>=</span>restore_job_id,
</span></span><span style=display:flex><span>            ValidationStatus<span style=color:#f92672>=</span>validation_status,
</span></span><span style=display:flex><span>            ValidationStatusMessage<span style=color:#f92672>=</span>validation_status_message
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>    logger<span style=color:#f92672>.</span>info(<span style=color:#e6db74>&#34;Finished processing restore validation for job ID: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span>, restore_job_id)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_bucket_name_from_arn</span>(arn):
</span></span><span style=display:flex><span>    arn_parts <span style=color:#f92672>=</span> arn<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#34;:&#34;</span>)
</span></span><span style=display:flex><span>    resource_parts <span style=color:#f92672>=</span> arn_parts[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#34;/&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> resource_parts[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]
</span></span></code></pre></div><p>Đoạn mã S3RestoreValidation xác thực khôi phục S3 bằng cách xác minh rằng bucket đó có nhiều hơn một đối tượng bên trong. Sau khi kiểm tra, nó sẽ báo cáo lại cho AWS Backup về việc liệu lần khôi phục đó đã hoàn thành thành công hay chưa. Một lần khôi phục và xác thực hoàn toàn thành công sẽ cho ra một bản tóm tắt như Hình 9. Trạng thái của công việc sẽ là Completed (Hoàn thành), và trạng thái xác thực sẽ là Successful (Thành công). Khi thiết lập trạng thái xác thực trong mã Lambda của bạn, bạn có thể tùy chọn thêm một thông báo xác thực, thông báo này sẽ xuất hiện trong giao diện điều khiển và các API của AWS Backup. Bạn có thể đọc thêm về xác thực khôi phục và các ví dụ trong tài liệu hướng dẫn.
<img alt="Hình 9: Ví dụ về việc hoàn tất thử nghiệm khôi phục AWS Backup" src=../../../images/2-Proposal/Blog2_9.png></p><p>AWS Backup tự động bắt đầu quá trình xóa tài nguyên đã được khôi phục khi việc xác thực được gửi đi hoặc khi khoảng thời gian dọn dẹp hết hạn. Thời gian xóa có thể khác nhau tùy thuộc vào loại tài nguyên. Hầu hết các tài nguyên được xóa nhanh chóng, nhưng một số có thể mất nhiều thời gian hơn. Ví dụ, việc xóa một bucket S3 là một quy trình gồm hai bước: đầu tiên là thêm các quy tắc vòng đời để xóa các đối tượng, và sau đó là xóa bucket khi nó đã trống. Các quy tắc vòng đời này có thể mất vài ngày để được thực thi.</p><h2 id=những-cân-nhắc-khi-kiểm-tra-khôi-phục-aws-backup>Những cân nhắc khi kiểm tra khôi phục AWS Backup</h2><p>Bây giờ bạn đã hiểu các phương pháp hay nhất để tạo kế hoạch kiểm tra và xác thực khôi phục, vẫn còn một số chi tiết triển khai khác mà bạn nên cân nhắc.</p><h2 id=tối-ưu-chi-phí>Tối ưu chi phí</h2><p>Tối ưu hóa chi phí đóng vai trò quan trọng trong suốt vòng đời sao lưu, bao gồm cả thử nghiệm khôi phục. Sau đây là cách quản lý chi phí hiệu quả:</p><ul><li><strong>Chọn tài nguyên một cách hợp lý:</strong> Sử dụng thẻ hoặc lựa chọn để chỉ kiểm tra các tài nguyên quan trọng, tránh các tài nguyên không phải tài nguyên sản xuất trừ khi việc tuân thủ yêu cầu.</li><li><strong>Lên lịch kiểm tra theo mức độ quan trọng:</strong> Lên lịch kiểm tra theo mức độ quan trọng (hàng ngày hoặc hàng tuần đối với các tài nguyên quan trọng, hàng quý hoặc nửa năm đối với các tài nguyên khác) phù hợp với chính sách và thời gian lưu giữ (ví dụ: kiểm tra trong vòng 14 ngày nếu thời gian lưu giữ là 14 ngày).</li><li><strong>Tối ưu hóa thời gian lưu giữ:</strong> Giảm thiểu thời gian khôi phục dữ liệu để giảm chi phí. Thiết lập thời gian xóa dựa trên các thử nghiệm tự động.</li></ul><p>Giá tham khảo cho thử nghiệm khôi phục có thể được tìm thấy trên trang giá <strong>AWS Backup pricing page</strong>.</p><h2 id=kiểm-toán-và-báo-cáo-sao-lưu-aws>Kiểm toán và báo cáo sao lưu AWS</h2><p><strong>AWS Backup Audit Manager</strong> giúp bạn đảm bảo các chính sách và tài nguyên sao lưu của mình tuân thủ các tiêu chuẩn nội bộ hoặc quy định. Công cụ này theo dõi liệu các tài nguyên có được sao lưu hay không, tần suất sao lưu, liệu các kho lưu trữ có được cách ly về mặt logic hay không, và liệu thời gian khôi phục có đáp ứng mục tiêu hay không. Các khuôn khổ kiểm toán của AWS Backup Audit Manager cho phép thực hiện điều này bằng cách cung cấp các cơ chế kiểm soát có sẵn hoặc các tùy chọn tùy chỉnh để đảm bảo tài nguyên tuân thủ chính sách.</p><p>Các báo cáo kiểm toán cung cấp bằng chứng về sự tuân thủ để có thể chia sẻ. Có hai loại báo cáo:</p><ol><li><strong>Báo cáo công việc:</strong> Hiển thị các công việc đã hoàn thành và đang hoạt động trong 24 giờ qua (ví dụ: báo cáo công việc khôi phục cho các lần khôi phục gần đây).</li><li><strong>Báo cáo tuân thủ:</strong> Giám sát trạng thái tài nguyên hoặc các cơ chế kiểm soát của khuôn khổ.</li></ol><p>Các tài khoản quản lý có được khả năng hiển thị trên nhiều tài khoản để tạo các báo cáo trên toàn tổ chức. Hãy xem tài liệu của <strong>AWS Backup documentation</strong> để biết các bước tạo báo cáo và thông tin chi tiết về cách sử dụng các khuôn khổ.</p><h2 id=khôi-phục-kế-hoạch-thử-nghiệm>Khôi phục kế hoạch thử nghiệm</h2><p>Khi tạo các kế hoạch kiểm thử khôi phục, hãy đảm bảo rằng các kế hoạch của bạn đáp ứng các yêu cầu kiểm thử và hoàn thành đúng hạn. Mỗi loại tài nguyên có một giới hạn về số lượng công việc khôi phục đồng thời từ các kế hoạch kiểm thử (không phải các lần khôi phục theo yêu cầu).</p><p>Khung thời gian <strong>&ldquo;Start within&rdquo;</strong> từ giai đoạn 1 là yếu tố then chốt. Cấu hình &ldquo;Start within&rdquo; có nghĩa là tất cả các lựa chọn tài nguyên cho một kế hoạch kiểm thử khôi phục phải bắt đầu trong khung thời gian này, và bạn cần cẩn thận để không vượt quá giới hạn đồng thời.</p><p><em>Ví dụ: Amazon S3 cho phép 30 lần khôi phục đồng thời, vì vậy việc chọn 90 bucket với khung thời gian một giờ có nguy cơ gây ra sự chậm trễ.</em></p><p>Để lên kế hoạch hiệu quả, hãy sử dụng một khung thời gian &ldquo;start within&rdquo; dài hơn hoặc tạo nhiều kế hoạch với các thời điểm bắt đầu so le nhau—đặc biệt là khi các bài kiểm thử thường xuyên (hàng ngày/hàng tuần) và định kỳ (hàng tháng/hàng quý) chạy cùng lúc. Hãy kiểm tra các giới hạn có thể điều chỉnh trong <strong>documentation</strong> và yêu cầu tăng giới hạn nếu cần.</p><h2 id=trực-quan-hoá-hoàn-chỉnh-quá-trình-thử-nghiệm>Trực quan hoá hoàn chỉnh quá trình thử nghiệm</h2><p>Để xem cách thức hoạt động của kiểm thử khôi phục toàn diện và cách triển khai và tích hợp các kế hoạch kiểm thử, chúng tôi đã đưa vào một kế hoạch kiểm thử khôi phục mẫu. Kế hoạch mẫu này giúp bạn hình dung từng bước của quy trình và xem cách khôi phục và xác thực tương tác với nhau.</p><p>Đây là một <strong>AWS CloudFormation</strong> được cấu hình sẵn, chạy tự động theo lịch trình hàng ngày.</p><h3 id=điều-kiện-tiên-quyết>Điều kiện tiên quyết</h3><p>Các điều kiện tiên quyết sau đây là cần thiết để hoàn thành giải pháp này:</p><ul><li>AWS Backup được cấu hình trong tài khoản của bạn.</li><li>Điểm khôi phục của Amazon S3 và/hoặc Amazon RDS.</li></ul><h3 id=khởi-chạy-aws-cloudformation-stack>Khởi chạy AWS CloudFormation stack</h3><p>Mẫu AWS CloudFormation này triển khai mọi thứ cần thiết để tự động kiểm tra khôi phục cả Amazon S3 và Amazon RDS.</p><p><a href=https://awsstorageblogresources.s3.us-west-2.amazonaws.com/blog1418/CFAWSBackupRestoreTestingV15.yaml>https://awsstorageblogresources.s3.us-west-2.amazonaws.com/blog1418/CFAWSBackupRestoreTestingV15.yaml</a></p><h3 id=chạy-kế-hoạch-thử-nghiệm-khôi-phục>Chạy kế hoạch thử nghiệm khôi phục</h3><p>Sau khi triển khai, không cần can thiệp thủ công để chạy kế hoạch. Kế hoạch kiểm tra khôi phục chạy một lần mỗi ngày trên tất cả các tài nguyên được kế hoạch đó chọn. Như đã lưu ý trong <strong>Hình 6</strong>, AWS Backup hoàn tất quá trình khôi phục, sau đó chạy các hàm Lambda để xác thực các lần khôi phục.</p><p>Khi quá trình xác thực hoàn tất thành công, quá trình xác thực sẽ hiển thị như trong <strong>Hình 10</strong>.
<img alt="Hình 10: Ví dụ về việc hoàn tất kiểm tra khôi phục AWS Backup" src=../../../images/2-Proposal/Blog2_10.png></p><h2 id=dọn-dẹp>Dọn dẹp</h2><p>Tất cả các tài nguyên đã được khôi phục từ kế hoạch kiểm thử khôi phục sẽ tự động bị xóa sau bốn giờ. Nếu bạn đang sử dụng kiểm thử khôi phục cho các tài nguyên Amazon S3, thì việc xóa các bucket S3 chứa dữ liệu sẽ mất nhiều thời gian hơn. Điều này là do các quy tắc vòng đời (lifecycle rules) mất vài ngày để thực thi. Để tránh phát sinh thêm chi phí, hãy xóa ngăn xếp (stack) CloudFormation, thao tác này sẽ xóa các kế hoạch kiểm thử khôi phục và dừng các lần kiểm thử sau này. Để biết hướng dẫn, hãy tham khảo mục Deleting a stack on the CloudFormation console.</p><h2 id=tổng-kết>Tổng kết</h2><p>Kiểm thử khôi phục của AWS Backup là một tính năng linh hoạt và có thể mở rộng, cho phép bạn điều chỉnh một giải pháp phù hợp với nhu cầu của tổ chức mình. Bạn có thể bắt đầu bằng cách tìm hiểu các chính sách của tổ chức, sau đó khám phá các khả năng kiểm thử khôi phục của AWS Backup trong AWS Management Console và học cách tích hợp kiểm thử tự động vào các chiến lược phục hồi sau thảm họa (DR) và khả năng phục hồi không gian mạng của mình. Để triển khai kiểm thử khôi phục của AWS Backup trong môi trường của bạn, hãy truy cập AWS Backup documentation. Bạn cũng có thể làm việc với các Kiến trúc sư Giải pháp của AWS để thiết kế một chiến lược xác thực sao lưu toàn diện được điều chỉnh cho phù hợp với nhu cầu của tổ chức bạn.</p><p>Thông điệp rất rõ ràng: việc xác thực sao lưu tự động không còn là một lựa chọn tùy chọn, đó là một yêu cầu cơ bản để đảm bảo hoạt động kinh doanh liên tục trong thời hiện đại. Việc kiểm thử thường xuyên giúp đáp ứng các chính sách nội bộ, các yêu cầu pháp lý, và các yêu cầu về khả năng phục hồi không gian mạng, trong khi đó, kiểm thử khôi phục của AWS Backup cung cấp một giải pháp hiệu quả, có khả năng mở rộng để đảm bảo sự sẵn sàng phục hồi.</p><h2 id=thông-tin-tác-giả>Thông tin tác giả</h2><h3 id=gabe-contreras>Gabe Contreras</h3><p>Gabe Contreras là Kiến trúc sư Giải pháp Lưu trữ Cao cấp cho bộ phận Tài khoản Chiến lược. Anh luôn mong muốn được trao đổi sâu với khách hàng để tìm ra giải pháp tốt nhất cho nhu cầu của họ. Anh luôn thích tìm hiểu cách thức vận hành của mọi thứ và giải quyết các vấn đề phức tạp.</p><h3 id=sabith-venkitachalapathy>Sabith Venkitachalapathy</h3><p>Sabith Venkitachalapathy là chuyên gia thiết kế các giải pháp phục hồi AWS, đảm bảo khả năng phục hồi sau thảm họa và tính khả dụng cao cho các khối lượng công việc quan trọng. Tập trung vào Dịch vụ Tài chính (FSI) và Chăm sóc Sức khỏe và Khoa học Đời sống (HCLS), Sabith tận dụng AWS để giải quyết các thách thức trong ngành và thúc đẩy đổi mới. Anh chia sẻ những hiểu biết thực tế để giúp các tổ chức xây dựng kiến trúc đám mây an toàn và linh hoạt.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../../vi/3-blogstranslated/3.1-blog1/ title="Blog 1"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../../vi/3-blogstranslated/3.3-blog3/ title="Blog 3" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../../js/clipboard.min.js?1765353830></script><script src=../../../js/perfect-scrollbar.min.js?1765353830></script><script src=../../../js/perfect-scrollbar.jquery.min.js?1765353830></script><script src=../../../js/jquery.sticky.js?1765353830></script><script src=../../../js/featherlight.min.js?1765353830></script><script src=../../../js/highlight.pack.js?1765353830></script><script>hljs.initHighlightingOnLoad()</script><script src=../../../js/modernizr.custom-3.6.0.js?1765353830></script><script src=../../../js/learn.js?1765353830></script><script src=../../../js/hugo-learn.js?1765353830></script><link href=../../../mermaid/mermaid.css?1765353830 rel=stylesheet><script src=../../../mermaid/mermaid.js?1765353830></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>